{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "http://github.com/o19s/ubi/schema/event.request.schema.json",
  "title": "Event",
  "description": "An event that occurred, typically in response to a user.  See https://github.com/o19s/opensearch-ubi/blob/2.14.0/documentation/schemas.md abd https://github.com/o19s/opensearch-ubi/blob/2.14.0/src/main/resources/events-mapping.json for more info.",
  "type": "object",
  "required": [ "action_name", "query_id", "timestamp"  ],
  "properties": {  
    "application": {    
      "description": "name of the application tracking UBI events (e.g. _amazon-shop_, _ABC-microservice_)",    
      "type": "string"
    },
    "action_name": {    
      "description": "The name of the action that triggered the event.  We have a set of common defaults, however you can pass in whatever you want.",    
      "oneOf": [
        {
          "type": "string",
          "enum": ["click_through", "add_to_cart"]
        },
        {
          "type": "string"
        }
      ]
    },
    "query_id": {    
      "description": "The unique identifier of a query, typically a UUID.",    
      "oneOf": [
        {
          "type": "string",
          "format": "uuid",
          "examples": ["00112233-4455-6677-8899-aabbccddeeff"]
        },
        {
          "type": "string",
          "examples": ["1234-user-5678"]
        }
      ]
    },
    "timestamp": {    
      "description": "When the event took place.",    
      "type": "string",
      "format": "date-time"
    },
    "message_type": {    
      "description": "ERIC: action_type?  event_type?  Should the front end define this?  Group various action_name into logical bins.",    
      "type": "string"
    },
    "message": {    
      "description": "optional text message for the log entry. For example, with a message_type of INFO, people might expect an informational or debug type text for this field, but a message_type of QUERY, we would expect the text to be more about what the user is searching on.",    
      "type": "string"
    },
    "event_attributes": {    
      "description": "Extensible details about a specific event.",    
      "type": "object",
      "properties": {
        "position": {
          "description": "structure that contains information on the location of the event origin, such as screen x,y coordinates, or the nth object out of 10 results, ....",
          "type": "object"
        },
        "object": {
          "description": "structure which contains identifying information of the object returned from the query that the user interacts with (i.e.: a book, a product, a post, etc..).",          
          "type": "object"          
        }
      }
    }  
  }
}
